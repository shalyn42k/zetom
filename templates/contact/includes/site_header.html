{% load static %}
{% with current_lang=lang|default:'pl' %}
<header class="site-header">
    <div class="site-branding">
        <img src="{% static 'img/zet3.avif' %}" alt="ZETOM Katowice" class="site-logo">
        <div>
            <h1 class="site-title">ZETOM Katowice</h1>
            <p class="site-subtitle">
                {% if current_lang == 'pl' %}
                    Badania • Certyfikacja • Kontrola techniczna
                {% else %}
                    Testing • Certification • Technical inspections
                {% endif %}
            </p>
        </div>
    </div>
    {% with base=nav_base|default:'' %}
        {% with about_url=base|add:'#about' services_url=base|add:'#services' contact_url=base|add:'#contact' %}
            <nav class="site-nav">
                <a href="{{ about_url|default:'#about' }}">{% if current_lang == 'pl' %}O nas{% else %}About{% endif %}</a>
                <a href="{{ services_url|default:'#services' }}">{% if current_lang == 'pl' %}Usługi{% else %}Services{% endif %}</a>
                <a href="{{ contact_url|default:'#contact' }}">{% if current_lang == 'pl' %}Kontakt{% else %}Contact{% endif %}</a>
                <a href="{{ admin_link_url|default:'#' }}" class="{% if active_nav == 'admin' %}is-active{% endif %}">
                    {% if current_lang == 'pl' %}Panel admina{% else %}Admin panel{% endif %}
                </a>
            </nav>
        {% endwith %}
    {% endwith %}
    <div class="site-header__actions">
        <div class="lang-switcher">
            <a href="{{ lang_switch_pl|default:'#' }}" class="{% if current_lang == 'pl' %}is-active{% endif %}">PL</a>
            <a href="{{ lang_switch_en|default:'#' }}" class="{% if current_lang != 'pl' %}is-active{% endif %}">EN</a>
        </div>
        <button type="button"
                class="theme-toggle"
                data-theme-toggle
                aria-pressed="false"
                aria-label="{% if current_lang == 'pl' %}Przełącz motyw{% else %}Toggle theme{% endif %}">
            <span class="theme-toggle__track">
                <svg class="theme-toggle__icon theme-toggle__icon--sun" viewBox="0 0 24 24" aria-hidden="true">
                    <circle cx="12" cy="12" r="4" fill="none" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8" />
                    <line x1="12" y1="2" x2="12" y2="4" stroke-linecap="round" stroke-width="1.8" />
                    <line x1="12" y1="20" x2="12" y2="22" stroke-linecap="round" stroke-width="1.8" />
                    <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" stroke-linecap="round" stroke-width="1.8" />
                    <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" stroke-linecap="round" stroke-width="1.8" />
                    <line x1="2" y1="12" x2="4" y2="12" stroke-linecap="round" stroke-width="1.8" />
                    <line x1="20" y1="12" x2="22" y2="12" stroke-linecap="round" stroke-width="1.8" />
                    <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" stroke-linecap="round" stroke-width="1.8" />
                    <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" stroke-linecap="round" stroke-width="1.8" />
                </svg>
                <svg class="theme-toggle__icon theme-toggle__icon--moon" viewBox="0 0 24 24" aria-hidden="true">
                    <path d="M21 12.79A9 9 0 0 1 11.21 3 7 7 0 1 0 21 12.79z"
                          fill="none"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="1.8" />
                </svg>
                <span class="theme-toggle__thumb" aria-hidden="true"></span>
            </span>
            <span class="theme-toggle__label"
                  data-theme-toggle-label
                  data-light-label="{% if current_lang == 'pl' %}Tryb ciemny{% else %}Dark mode{% endif %}"
                  data-dark-label="{% if current_lang == 'pl' %}Tryb jasny{% else %}Light mode{% endif %}">
                {% if current_lang == 'pl' %}Tryb ciemny{% else %}Dark mode{% endif %}
            </span>
        </button>
        {% if show_logout %}
            <form method="post" action="{{ logout_action }}">
                {% csrf_token %}
                <button type="submit" class="button button--ghost button--compact">
                    {% if current_lang == 'pl' %}Wyloguj{% else %}Log out{% endif %}
                </button>
            </form>
        {% endif %}
    </div>
</header>
{% endwith %}

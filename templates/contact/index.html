{% load static %}
<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if lang == 'pl' %}ZETOM Katowice – Badania i certyfikacja{% else %}ZETOM Katowice – Testing & Certification{% endif %}</title>
    <link rel="shortcut icon" href="{% static 'img/zet1.png' %}" type="image/png">
    <link rel="stylesheet" href="{% static 'css/public.css' %}">
    <script src="{% static 'js/public.js' %}" defer></script>
</head>
<body>
<header class="site-header">
    <a href="{% url 'contact:staff-login' %}?lang={{ lang }}"
       class="site-branding site-branding--link"
       aria-label="{% if lang == 'pl' %}Panel administracyjny{% else %}Admin panel{% endif %}">
        <img src="{% static 'img/zet3.avif' %}" alt="ZETOM Katowice" class="site-logo">
        <div>
            <h1 class="site-title">ZETOM Katowice</h1>
            <p class="site-subtitle">{% if lang == 'pl' %}Badania • Certyfikacja • Kontrola techniczna{% else %}Testing • Certification • Technical inspections{% endif %}</p>
        </div>
    </a>
    <nav class="site-nav">
        <a href="#about">{% if lang == 'pl' %}O nas{% else %}About{% endif %}</a>
        <a href="#services">{% if lang == 'pl' %}Usługi{% else %}Services{% endif %}</a>
        <a href="#contact">{% if lang == 'pl' %}Kontakt{% else %}Contact{% endif %}</a>
    </nav>
    <div class="site-header__actions">
        <div class="lang-switcher">
            <a href="{% url 'contact:index' %}?lang=pl" class="{% if lang == 'pl' %}is-active{% endif %}">PL</a>
            <a href="{% url 'contact:index' %}?lang=en" class="{% if lang != 'pl' %}is-active{% endif %}">EN</a>
        </div>
    </div>
</header>

<section class="hero" id="hero">
    <div class="hero-content">
        <h2 class="hero-title">{% if lang == 'pl' %}Zapoznaj się z naszą ofertą{% else %}Discover our services{% endif %}</h2>
        <p class="hero-text">
            {% if lang == 'pl' %}
                Zespół ekspertów ZETOM wspiera producentów i dystrybutorów w zapewnianiu jakości
                oraz bezpieczeństwa produktów. Oferujemy kompleksowe badania laboratoryjne,
                certyfikację i doradztwo techniczne.
            {% else %}
                The ZETOM team helps manufacturers and distributors deliver safe, compliant products.
                We provide comprehensive laboratory testing, certification services and technical consultancy.
            {% endif %}
        </p>
        <div class="hero-actions">
            <a href="#contact" class="button button--primary">{% if lang == 'pl' %}Skontaktuj się z nami{% else %}Contact us{% endif %}</a>
            <a href="#services" class="button button--ghost">{% if lang == 'pl' %}Poznaj nasze usługi{% else %}Explore services{% endif %}</a>
        </div>
    </div>
</section>

<main>
    <section class="section" id="contact">
        <div class="section-header">
            <h2 class="section-title">{% if lang == 'pl' %}Napisz do nas{% else %}Send us a message{% endif %}</h2>
            <p class="section-text">
                {% if lang == 'pl' %}
                    Wypełnij formularz, a nasz zespół skontaktuje się z Tobą w ciągu dwa dnia roboczego.
                {% else %}
                    Fill in the form and our team will get back to you within two business day.
                {% endif %}
            </p>
        </div>

        {% if messages %}
            <div class="message-list">
                {% for msg in messages %}
                    {% with tags=msg.tags %}
                        <div class="alert {% if 'success' in tags %}alert-success{% elif 'error' in tags or 'warning' in tags %}alert-error{% else %}alert-success{% endif %}">
                            {{ msg }}
                        </div>
                    {% endwith %}
                {% endfor %}
            </div>
        {% endif %}

        {% if success_info %}
            <div class="alert alert-success" role="status">
                <p class="mb-2">{% if lang == 'pl' %}Numer zgłoszenia: <strong>#{{ success_info.id }}</strong>{% else %}Request ID: <strong>#{{ success_info.id }}</strong>{% endif %}</p>
                {% if success_info.token %}
                    <p class="mb-2">{% if lang == 'pl' %}Zachowaj hasło dostępu:{% else %}Save this access password:{% endif %} <code>{{ success_info.token }}</code></p>
                    <p>{% if lang == 'pl' %}Możesz otworzyć zgłoszenie{% else %}You can open the request{% endif %}
                        <a href="{% url 'contact:public-request' success_info.id %}?access={{ success_info.token }}" rel="noreferrer noopener">{% if lang == 'pl' %}tymczasowym odnośnikiem{% else %}using this one-time link{% endif %}</a>.</p>
                {% endif %}
            </div>
        {% endif %}

        <div class="contact-section">
            <aside class="contact-card">
                <h3>{% if lang == 'pl' %}Dane kontaktowe{% else %}Contact details{% endif %}</h3>
                <div class="contact-details">
                    <div>
                        <strong>{% if lang == 'pl' %}Adres{% else %}Address{% endif %}</strong><br>
                        Zakłady Badań i Atestacji „ZETOM”<br>
                        ul. Ks. Bpa H. Bednorza 17,<br>
                        40-384 Katowice
                    </div>
                    <div>
                        <strong>{% if lang == 'pl' %}Godziny pracy{% else %}Opening hours{% endif %}</strong><br>
                        07:00 – 15:00
                    </div>
                    <div>
                        <strong>Tel.</strong><br>
                        <a href="tel:+48322569257">32 256 92 57</a><br>
                        <a href="tel:+48322569369">32 256 93 69</a>
                    </div>
                    <div>
                        <strong>E-mail</strong><br>
                        <a href="https://mail.google.com/mail/?view=cm&amp;fs=1&amp;to=biuro@zetom.eu" target="_blank" rel="noopener">biuro@zetom.eu</a>
                    </div>
                </div>
            </aside>

            <form method="post"
                  action="{% url 'contact:index' %}?lang={{ lang }}"
                  enctype="multipart/form-data"
                  class="contact-form"
                  data-contact-form
                  data-bot-required-message="{% if lang == 'pl' %}Potwierdź, że nie jesteś botem.{% else %}Please confirm you are not a bot.{% endif %}"
                  data-submit-cooldown-seconds="{{ throttle_seconds }}"
                  data-submit-cooldown-message="{% if lang == 'pl' %}Odczekaj {seconds} s przed ponownym wysłaniem.{% else %}Please wait {seconds} s before sending again.{% endif %}"
                  data-submit-cooldown-storage="contactFormCooldownEndsAt">
                {% csrf_token %}
                {% if form.non_field_errors %}
                    <div class="form-error">{{ form.non_field_errors.0 }}</div>
                {% endif %}
                <div class="form-grid">
                    <div class="form-field">
                        <label for="{{ form.first_name.id_for_label }}" class="form-label">{% if lang == 'pl' %}Imię{% else %}First name{% endif %}</label>
                        {{ form.first_name }}
                        {% if form.first_name.errors %}<div class="form-error">{{ form.first_name.errors.0 }}</div>{% endif %}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.last_name.id_for_label }}" class="form-label">{% if lang == 'pl' %}Nazwisko{% else %}Last name{% endif %}</label>
                        {{ form.last_name }}
                        {% if form.last_name.errors %}<div class="form-error">{{ form.last_name.errors.0 }}</div>{% endif %}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.phone.id_for_label }}" class="form-label">{% if lang == 'pl' %}Telefon{% else %}Phone{% endif %}</label>
                        {{ form.phone }}
                        {% if form.phone.errors %}<div class="form-error">{{ form.phone.errors.0 }}</div>{% endif %}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.email.id_for_label }}" class="form-label">E-mail</label>
                        {{ form.email }}
                        {% if form.email.errors %}<div class="form-error">{{ form.email.errors.0 }}</div>{% endif %}
                    </div>
                    <div class="form-field">
                        <label for="{{ form.company.id_for_label }}" class="form-label">{% if lang == 'pl' %}Firma{% else %}Company{% endif %}</label>
                        {{ form.company }}
                        {% if form.company.errors %}<div class="form-error">{{ form.company.errors.0 }}</div>{% endif %}
                    </div>
                    <div class="form-field" style="grid-column: 1 / -1;">
                        <label for="{{ form.message.id_for_label }}" class="form-label">{% if lang == 'pl' %}Treść wiadomości{% else %}Message{% endif %}</label>
                        {{ form.message }}
                        {% if form.message.errors %}<div class="form-error">{{ form.message.errors.0 }}</div>{% endif %}
                    </div>
                    <div class="form-field" style="grid-column: 1 / -1;">
                        <label class="form-label">{% if lang == 'pl' %}Załączniki{% else %}Attachments{% endif %}</label>
                        {{ form.attachments }}
                        <p class="form-help">{% if lang == 'pl' %}Maks. 25 MB łącznie. Dozwolone PDF, JPG, PNG, TXT.{% else %}Up to 25 MB total. Allowed types: PDF, JPG, PNG, TXT.{% endif %}</p>
                        {% if form.attachments.errors %}<div class="form-error">{{ form.attachments.errors.0 }}</div>{% endif %}
                    </div>
                </div>
                <div class="form-actions" data-submit-container>
                    <button type="button" class="button button--primary" data-review-open>{% if lang == 'pl' %}Wyślij{% else %}Send{% endif %}</button>
                    <div class="submit-tooltip" data-submit-tooltip aria-live="polite" hidden></div>
                </div>
                <div class="modal review-modal" data-review-modal hidden aria-hidden="true">
                    <div class="modal__backdrop" data-review-close></div>
                    <div class="modal__dialog review-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="review-modal-title">
                        <button type="button" class="modal__close" data-review-close aria-label="{% if lang == 'pl' %}Zamknij podgląd{% else %}Close review{% endif %}">×</button>
                        <h3 class="modal__title" id="review-modal-title">{% if lang == 'pl' %}Sprawdź i wyślij{% else %}Review and send{% endif %}</h3>
                        <p class="modal__intro review-modal__intro">{% if lang == 'pl' %}Przejrzyj i w razie potrzeby popraw dane przed finalnym wysłaniem wiadomości.{% else %}Review your details and make any final edits before sending the message.{% endif %}</p>
                        <div class="review-modal__fields" data-review-fields></div>
                        <div class="form-checkbox-group review-modal__checkbox">
                            <label class="form-checkbox">
                                {{ form.bot_check }}
                                <span>{% if lang == 'pl' %}Potwierdzam, że nie jestem botem{% else %}I confirm that I am not a bot{% endif %}</span>
                            </label>
                            {% if form.bot_check.errors %}
                                <div class="form-error" data-bot-error>{{ form.bot_check.errors.0 }}</div>
                            {% else %}
                                <div class="form-error" data-bot-error hidden></div>
                            {% endif %}
                        </div>
                        <div class="modal__actions review-modal__actions">
                            <button type="button" class="button button--ghost" data-review-close>{% if lang == 'pl' %}Wróć do edycji{% else %}Back to form{% endif %}</button>
                            <button type="submit" class="button button--primary" data-form-submit>{% if lang == 'pl' %}Wyślij wiadomość{% else %}Send message{% endif %}</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <section class="section about-section" id="about">
        <div class="section-header">
            <h2 class="section-title">{% if lang == 'pl' %}Dlaczego ZETOM?{% else %}Why ZETOM?{% endif %}</h2>
            <p class="section-text">
                {% if lang == 'pl' %}
                    Od ponad 75 lat wspieramy polski przemysł w zakresie badań jakościowych i certyfikacji.
                    Łączymy doświadczenie ekspertów z nowoczesnym zapleczem laboratoryjnym.
                {% else %}
                    For over 75 years we have been supporting Polish industry with quality testing and certification.
                    We combine expert knowledge with state-of-the-art laboratory facilities.
                {% endif %}
            </p>
        </div>
        <div class="info-grid" id="services">
            <article class="info-card">
                <h3>{% if lang == 'pl' %}Badania laboratoryjne{% else %}Laboratory testing{% endif %}</h3>
                <p>{% if lang == 'pl' %}Nowoczesne laboratoria pomiarowe i środowiskowe dla szerokiej gamy produktów.{% else %}Modern measurement and environmental laboratories for a wide range of products.{% endif %}</p>
            </article>
            <article class="info-card">
                <h3>{% if lang == 'pl' %}Certyfikacja{% else %}Certification{% endif %}</h3>
                <p>{% if lang == 'pl' %}Wsparcie w ocenie zgodności, dokumentacji technicznej i znakowaniu CE.{% else %}Support with conformity assessment, technical documentation and CE marking.{% endif %}</p>
            </article>
            <article class="info-card">
                <h3>{% if lang == 'pl' %}Doradztwo techniczne{% else %}Technical advisory{% endif %}</h3>
                <p>{% if lang == 'pl' %}Indywidualne konsultacje, audyty i szkolenia dostosowane do potrzeb klienta.{% else %}Tailor-made consultations, audits and workshops for your organisation.{% endif %}</p>
            </article>
            <article class="info-card">
                <h3>{% if lang == 'pl' %}Zespół ekspertów{% else %}Expert team{% endif %}</h3>
                <ul>
                    <li>{% if lang == 'pl' %}Ponad 40 specjalistów z wieloletnim doświadczeniem.{% else %}Over 40 specialists with long-standing experience.{% endif %}</li>
                    <li>{% if lang == 'pl' %}Uznane certyfikaty i akredytacje.{% else %}Recognised certificates and accreditations.{% endif %}</li>
                    <li>{% if lang == 'pl' %}Podejście partnerskie na każdym etapie projektu.{% else %}Partnership approach at every project stage.{% endif %}</li>
                </ul>
            </article>
        </div>
    </section>

    {% if activity_feed %}
    <section class="section" id="updates">
        <div class="section-header">
            <h2 class="section-title">{% if lang == 'pl' %}Aktualizacje zgłoszeń{% else %}Recent request updates{% endif %}</h2>
        </div>
        <ul class="timeline">
            {% for item in activity_feed %}
                <li class="timeline-item">
                    <span class="timeline-date">{{ item.created_at|date:"Y-m-d H:i" }}</span>
                    <p class="timeline-text">{{ item.message|default:item.get_type_display }}</p>
                </li>
            {% endfor %}
        </ul>
    </section>
    {% endif %}
</main>

{% if success_message %}
<div class="modal" data-success-modal aria-hidden="true">
    <div class="modal__backdrop" data-success-close></div>
    <div class="modal__dialog modal__dialog--success" role="alertdialog" aria-modal="true" aria-labelledby="success-modal-title">
        <button type="button" class="modal__close" data-success-close aria-label="{% if lang == 'pl' %}Zamknij powiadomienie{% else %}Close notification{% endif %}">×</button>
        <div class="success-modal__icon" aria-hidden="true">✓</div>
        <h2 class="modal__title success-modal__title" id="success-modal-title">{% if lang == 'pl' %}Dziękujemy!{% else %}Thank you!{% endif %}</h2>
        <p class="modal__intro success-modal__message">{{ success_message }}</p>
        <div class="modal__actions success-modal__actions">
            <button type="button" class="button button--primary" data-success-close>{% if lang == 'pl' %}Zamknij{% else %}Close{% endif %}</button>
        </div>
    </div>
</div>
{% endif %}

<footer class="footer">
    <div class="footer-content">
        <h2 class="footer-title">ZETOM Katowice</h2>
        <p>{% if lang == 'pl' %}Razem zadbajmy o bezpieczeństwo i jakość Twoich produktów.{% else %}Let’s ensure the safety and quality of your products together.{% endif %}</p>
        <div class="footer-columns">
            <div>
                <strong>{% if lang == 'pl' %}Adres{% else %}Address{% endif %}</strong><br>
                ul. Ks. Bpa H. Bednorza 17<br>
                40-384 Katowice
            </div>
            <div>
                <strong>{% if lang == 'pl' %}Kontakt{% else %}Contact{% endif %}</strong><br>
                <a href="tel:+48322569257">32 256 92 57</a><br>
                <a href="https://mail.google.com/mail/?view=cm&amp;fs=1&amp;to=biuro@zetom.eu" target="_blank" rel="noopener">biuro@zetom.eu</a>
            </div>
            <div>
                <strong>{% if lang == 'pl' %}Panel admina{% else %}Admin panel{% endif %}</strong><br>
                <a href="{% url 'contact:staff-login' %}?lang={{ lang }}">{% if lang == 'pl' %}Zaloguj się{% else %}Log in{% endif %}</a>
            </div>
        </div>
    </div>
</footer>
</body>
</html>

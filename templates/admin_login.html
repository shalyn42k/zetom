<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8">
    <title>{% if lang == 'pl' %}Panel Admina - Logowanie{% else %}Admin Login{% endif %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f8f9fa;
            transition: background-color 0.3s, color 0.3s;
            position: relative;
        }

        .dark-theme {
            background-color: #121212;
            color: #e0e0e0;
        }

        .dark-theme .card {
            background-color: #1e1e1e;
            color: #e0e0e0;
        }

        .top-bar {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        /* кнопка Back в правом нижнем углу */
        .back-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>
<body>

    <!-- верхняя панель с кнопками темы и языка -->
    <div class="top-bar">
        <button class="btn btn-sm btn-dark" onclick="toggleTheme()">Theme</button>
        <button class="btn btn-sm btn-secondary" onclick="toggleLang()">Language</button>
    </div>

    <!-- карточка логина -->
    <div class="card" style="width: 300px;">
        <div class="card-body">
            <h5 class="card-title text-center">
                {% if lang == 'pl' %}Logowanie Admina{% else %}Admin Login{% endif %}
            </h5>

            <form method="POST" action="{{ url_for('routes.login') }}">
                <div class="mb-3">
                    <label class="form-label">
                        {% if lang == 'pl' %}Hasło{% else %}Password{% endif %}
                    </label>
                    <input type="password" class="form-control" name="password" required>
                </div>
                <button type="submit" class="btn btn-primary w-100">
                    {% if lang == 'pl' %}Zaloguj{% else %}Log in{% endif %}
                </button>
            </form>

            {% with messages = get_flashed_messages() %}
                {% if messages %}
                    <div class="alert alert-danger mt-3">
                        {{ messages[0] }}
                    </div>
                {% endif %}
            {% endwith %}
        </div>
    </div>

    <!-- кнопка Back -->
    <a href="/" class="btn btn-secondary back-button">
        {% if lang == 'pl' %}Powrót{% else %}Back{% endif %}
    </a>

    <script>
        function toggleTheme() {
            const body = document.body;
            body.classList.toggle("dark-theme");
            if (body.classList.contains("dark-theme")) {
                localStorage.setItem("theme", "dark");
            } else {
                localStorage.setItem("theme", "light");
            }
        }

        window.onload = () => {
            if (localStorage.getItem("theme") === "dark") {
                document.body.classList.add("dark-theme");
            }
        };

        function toggleLang() {
            let currentLang = "{{ lang }}";
            let newLang = currentLang === "pl" ? "eng" : "pl";
            window.location.href = "/login?lang=" + newLang;
        }
    </script>

</body>
</html>
